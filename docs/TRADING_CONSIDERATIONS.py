"""
실전 매매 시 고려사항 - 완전 분석
"""

print('\n' + '='*80)
print('📋 실전 매매 시 고려사항 - 완전 체크리스트')
print('='*80)

print('\n' + '='*80)
print('1️⃣ 매수 시점 고려사항')
print('='*80)

print('\n🔍 급락 감지 조건')
print('-'*80)
print('✓ 전일 대비 -10% 이상 하락')
print('✓ 거래량 100만주 이상 (1000만원 투자 가능)')
print('✓ 거래량 1000만주 이상 (1억 투자 가능)')
print('✓ VI(변동성완화장치) 발동 여부')
print('✓ 시장 전체 급락 vs 개별 종목 급락 구분')
print('')
print('⚠️ 주의사항:')
print('  - 상한가/하한가 근처 종목 제외')
print('  - 관리종목/정리매매 종목 제외')
print('  - 불성실공시 종목 제외')

print('\n⏰ 매수 타이밍')
print('-'*80)
print('1) 시초가 (09:00)')
print('   장점: 확실한 체결')
print('   단점: 갭 상승 시 불리한 가격')
print('   분석 결과: 갭 상승 58.8%, 보합 20.7%, 갭 하락 20.5%')
print('   → 시장가 매수 권장')
print('')
print('2) 장중 지정가 (09:00~15:20)')
print('   장점: 유리한 가격 진입 가능')
print('   단점: 체결 안 될 수 있음')
print('   권장 가격: 전일 종가 -1%')
print('')
print('3) 급락 직후 (실시간 감지)')
print('   장점: 최저가 근처 매수')
print('   단점: 추가 하락 위험')

print('\n💰 매수가 결정')
print('-'*80)
print('시나리오 1: 갭 상승 (+2% 이상)')
print('  전일 종가: 10,000원')
print('  시초가: 10,300원')
print('  → 시장가 매수 (10,300원에 체결)')
print('  → AI 확률 60%+ 이면 진입')
print('')
print('시나리오 2: 보합 (±2%)')
print('  전일 종가: 10,000원')
print('  시초가: 10,100원')
print('  → 지정가 10,000원 (전일 종가)')
print('  → 체결 안되면 시장가')
print('')
print('시나리오 3: 갭 하락 (-2% 이상)')
print('  전일 종가: 10,000원')
print('  시초가: 9,700원')
print('  → 지정가 9,700원 또는 시장가')
print('  → 추가 하락 주의')

print('\n📊 AI 예측 확률 체크')
print('-'*80)
print('✓ 60% 이상: 매수 진행')
print('✓ 50-60%: 보류 (승률 낮음)')
print('✓ 50% 이하: 매수 금지')
print('')
print('현재 AI 성능:')
print('  - 60% 이상 확률: 624회 (3년)')
print('  - 실제 승률: 79.0%')
print('  - 평균 수익: 13.51%')

print('\n💸 투자 금액 결정')
print('-'*80)
print('전략 A: 100% 1회 매수 (추천)')
print('  예수금: 1,000만원')
print('  매수금액: 1,000만원')
print('  장점: 수익률 최대화 (8,429%)')
print('  단점: 손실 시 타격 큼')
print('')
print('전략 B: 50% + 물타기')
print('  1차 매수: 500만원')
print('  2차 매수: 500만원 (-5% 하락 시)')
print('  장점: 승률 향상 (83.2%)')
print('  단점: 수익률 낮음 (4,905%)')
print('')
print('✅ 결론: 100% 1회 매수가 3,523%p 더 유리')

print('\n🎯 매수 체결 확인')
print('-'*80)
print('✓ 체결 가격 확인')
print('✓ 체결 수량 확인 (부분 체결 주의)')
print('✓ 거래 수수료 확인 (0.015%)')
print('✓ 평균 단가 기록')
print('✓ 목표 익절가 계산 (평단 + 20%)')
print('✓ 목표 손절가 계산 (평단 - 5%)')


print('\n' + '='*80)
print('2️⃣ 보유 중 모니터링')
print('='*80)

print('\n📈 목표가 추적')
print('-'*80)
print('매수가: 10,000원 가정')
print('')
print('익절가: 12,000원 (+20%)')
print('  - 지정가 주문 미리 등록')
print('  - 도달 시 즉시 매도')
print('')
print('손절가: 9,500원 (-5%)')
print('  - 손절가 도달 시 즉시 매도')
print('  - 추가 하락 방지')

print('\n⏱️ 보유 기간 관리')
print('-'*80)
print('평균 보유 기간: 2.3일')
print('최대 보유 기간: 5일')
print('')
print('1일차: 급락 발생일')
print('  → 익절/손절 대기')
print('')
print('2일차: 반등 관찰')
print('  → 평균 수익률 확인')
print('')
print('3일차: 추세 판단')
print('  → 익절 안되면 청산 고려')
print('')
print('5일차: 강제 청산')
print('  → 수익/손실 관계없이 매도')
print('  → 다음 기회 대기')

print('\n🚨 예외 상황 대응')
print('-'*80)
print('상황 1: 상한가 (+30%)')
print('  → 익절 목표 초과')
print('  → 즉시 매도 (시장가)')
print('')
print('상황 2: 하한가 (-30%)')
print('  → 손절가 초과')
print('  → 매도 불가 상황')
print('  → 다음날 시초가 매도')
print('')
print('상황 3: 거래정지')
print('  → 공시 확인')
print('  → 재개 시 즉시 청산')
print('')
print('상황 4: 추가 악재')
print('  → 뉴스/공시 확인')
print('  → 손절가 관계없이 청산 고려')


print('\n' + '='*80)
print('3️⃣ 매도 시점 결정')
print('='*80)

print('\n✅ 익절 매도 (+20%)')
print('-'*80)
print('조건: 현재가 ≥ 평단가 × 1.20')
print('')
print('예시:')
print('  매수가: 10,000원')
print('  익절가: 12,000원')
print('  현재가: 12,050원')
print('  → 즉시 매도 (시장가 또는 지정가 12,000원)')
print('')
print('주의사항:')
print('  - 시장가: 확실한 체결, 슬리피지 발생 가능')
print('  - 지정가: 익절가 정확히 맞춤, 체결 안될 수 있음')
print('  → 시장가 추천 (확실한 수익 확보)')

print('\n❌ 손절 매도 (-5%)')
print('-'*80)
print('조건: 현재가 ≤ 평단가 × 0.95')
print('')
print('예시:')
print('  매수가: 10,000원')
print('  손절가: 9,500원')
print('  현재가: 9,480원')
print('  → 즉시 매도 (시장가)')
print('')
print('주의사항:')
print('  - 감정 배제 (무조건 매도)')
print('  - 추가 하락 방지')
print('  - 다음 기회 대기')

print('\n⏰ 5일차 강제 청산')
print('-'*80)
print('조건: 매수 후 5일 경과')
print('')
print('시나리오 1: +5% 수익')
print('  → 익절가 미달이지만 수익 실현')
print('')
print('시나리오 2: -2% 손실')
print('  → 손절가 미달이지만 청산')
print('')
print('시나리오 3: 0% 보합')
print('  → 수수료만큼 손실이지만 청산')
print('')
print('이유: 자금 회전율 향상, 다음 기회 포착')

print('\n📊 매도 체결 확인')
print('-'*80)
print('✓ 체결 가격 확인')
print('✓ 체결 수량 확인 (전량 매도 확인)')
print('✓ 거래 수수료 확인 (0.015%)')
print('✓ 실현 손익 계산')
print('✓ 수익률 기록')
print('✓ 거래 일지 작성')


print('\n' + '='*80)
print('4️⃣ 거래 비용 계산')
print('='*80)

print('\n💵 수수료 구조')
print('-'*80)
print('매수 수수료: 0.015%')
print('매도 수수료: 0.015%')
print('거래세: 0.23% (매도 시만)')
print('총 비용: 0.28%')
print('')
print('예시: 1,000만원 거래')
print('  매수 수수료: 1,500원')
print('  매도 수수료: 1,500원')
print('  거래세: 23,000원')
print('  총 비용: 26,000원 (0.26%)')

print('\n📊 손익분기점')
print('-'*80)
print('거래 비용 회수 필요:')
print('  매수가: 10,000원')
print('  손익분기가: 10,028원 (+0.28%)')
print('  → 0.3% 이상 상승해야 수익')
print('')
print('익절 시 실제 수익:')
print('  매수가: 10,000원')
print('  매도가: 12,000원 (+20%)')
print('  수수료: 28원')
print('  실제 수익: 1,972원 (+19.72%)')
print('')
print('손절 시 실제 손실:')
print('  매수가: 10,000원')
print('  매도가: 9,500원 (-5%)')
print('  수수료: 28원')
print('  실제 손실: -528원 (-5.28%)')


print('\n' + '='*80)
print('5️⃣ 리스크 관리')
print('='*80)

print('\n⚠️ 일일 손실 한도')
print('-'*80)
print('전체 예수금: 1,000만원')
print('일일 최대 손실: 50만원 (-5%)')
print('')
print('손실 누적 시:')
print('  1회 손실: 50만원')
print('  → 당일 거래 중단')
print('  → 다음날 재개')
print('')
print('연속 손실 시:')
print('  3회 연속 손실')
print('  → 전략 재검토')
print('  → AI 확률 임계값 상향 (70%+)')

print('\n📊 포지션 크기 관리')
print('-'*80)
print('단일 종목 투자 한도:')
print('  전체 예수금: 1,000만원')
print('  1회 투자: 1,000만원 (100%)')
print('  → 집중 투자 전략')
print('')
print('분산 투자 옵션:')
print('  옵션 1: 1종목 1,000만원')
print('    장점: 수익률 최대')
print('    단점: 위험 집중')
print('')
print('  옵션 2: 2종목 각 500만원')
print('    장점: 위험 분산')
print('    단점: 수익률 감소')
print('')
print('✅ 추천: 1종목 집중 투자')
print('   (AI 확률 60%+ 일 때만 진입)')

print('\n🎯 월간 목표 관리')
print('-'*80)
print('월 거래 목표: 17회 (AI 필터링)')
print('월 수익 목표: 234.1%')
print('')
print('실적 관리:')
print('  목표 달성: 계속 진행')
print('  목표 미달: 전략 재검토')
print('  과도한 손실: 거래 중단')


print('\n' + '='*80)
print('6️⃣ 시장 상황별 대응')
print('='*80)

print('\n📉 전체 시장 급락')
print('-'*80)
print('코스피/코스닥 -3% 이상:')
print('  → 개별 종목 급락 구분 어려움')
print('  → 매수 보류 권장')
print('  → 시장 안정 후 재개')
print('')
print('예외:')
print('  - AI 확률 70% 이상')
print('  - 개별 악재 있는 종목')
print('  → 선별적 진입')

print('\n📈 강세장')
print('-'*80)
print('지수 +2% 이상:')
print('  → 급락 종목 적음')
print('  → 기회 제한적')
print('  → 대기 권장')

print('\n📊 횡보장')
print('-'*80)
print('지수 변동 ±1%:')
print('  → 정상적인 급락 발생')
print('  → 적극적 매매')
print('  → 최적의 환경')

print('\n🌙 장외 시간')
print('-'*80)
print('장 마감 후 (15:30~):')
print('  - 공시 확인')
print('  - 뉴스 모니터링')
print('  - 다음날 예상 급락 종목 체크')
print('')
print('장 시작 전 (06:00~09:00):')
print('  - 해외 시장 확인')
print('  - 주요 뉴스 확인')
print('  - VI 예상 종목 파악')


print('\n' + '='*80)
print('7️⃣ 데이터 기록 및 분석')
print('='*80)

print('\n📝 거래 일지')
print('-'*80)
print('매 거래마다 기록:')
print('  1. 날짜/시간')
print('  2. 종목코드/종목명')
print('  3. 매수가/매수량')
print('  4. 매도가/매도량')
print('  5. 수익률')
print('  6. AI 예측 확률')
print('  7. 실제 결과 (성공/실패)')
print('  8. 보유 기간')
print('  9. 특이사항/메모')

print('\n📊 성과 분석')
print('-'*80)
print('주간 분석:')
print('  - 거래 횟수')
print('  - 승률')
print('  - 평균 수익률')
print('  - 손실 분석')
print('')
print('월간 분석:')
print('  - 목표 대비 실적')
print('  - AI 정확도 검증')
print('  - 전략 개선점 도출')

print('\n🔄 AI 모델 업데이트')
print('-'*80)
print('재학습 주기: 3개월')
print('')
print('재학습 시기:')
print('  - 승률 70% 미만 지속')
print('  - 시장 환경 변화')
print('  - 새로운 패턴 발견')
print('')
print('재학습 절차:')
print('  1. 실전 거래 데이터 수집')
print('  2. 기존 데이터에 추가')
print('  3. 모델 재학습')
print('  4. 백테스팅 검증')
print('  5. 실전 적용')


print('\n' + '='*80)
print('8️⃣ 자동화 vs 수동 매매')
print('='*80)

print('\n🤖 자동 매매')
print('-'*80)
print('장점:')
print('  ✓ 감정 배제')
print('  ✓ 24시간 모니터링')
print('  ✓ 즉각적인 체결')
print('  ✓ 일관된 전략 실행')
print('')
print('단점:')
print('  ✗ 예외 상황 대응 어려움')
print('  ✗ 시스템 오류 위험')
print('  ✗ 급격한 시장 변화 대응 느림')

print('\n👨‍💻 수동 매매')
print('-'*80)
print('장점:')
print('  ✓ 유연한 판단')
print('  ✓ 예외 상황 대응')
print('  ✓ 시장 분위기 반영')
print('')
print('단점:')
print('  ✗ 감정 개입')
print('  ✗ 체결 지연')
print('  ✗ 놓치는 기회')

print('\n✅ 추천: 반자동 매매')
print('-'*80)
print('자동화:')
print('  - 급락 감지')
print('  - AI 예측')
print('  - 알림 발송')
print('')
print('수동 확인:')
print('  - 시장 상황 판단')
print('  - 최종 매수 결정')
print('  - 익절/손절 실행')


print('\n' + '='*80)
print('9️⃣ 체크리스트 요약')
print('='*80)

print('\n🔍 매수 전 체크리스트')
print('-'*80)
print('□ 급락 -10% 이상 확인')
print('□ 거래량 100만주 이상')
print('□ AI 확률 60% 이상')
print('□ 관리종목/정리매매 아님')
print('□ 전체 시장 상황 양호')
print('□ 예수금 충분')
print('□ 일일 손실 한도 미초과')
print('□ 매수가 결정 (시장가/지정가)')
print('□ 익절/손절가 계산')

print('\n📊 보유 중 체크리스트')
print('-'*80)
print('□ 익절가 도달 확인 (+20%)')
print('□ 손절가 도달 확인 (-5%)')
print('□ 보유 일수 확인 (최대 5일)')
print('□ 추가 뉴스/공시 확인')
print('□ 시장 상황 모니터링')

print('\n💰 매도 전 체크리스트')
print('-'*80)
print('□ 매도 사유 확인 (익절/손절/기간)')
print('□ 매도 가격 결정 (시장가/지정가)')
print('□ 전량 매도 확인')
print('□ 체결 확인')
print('□ 실현 손익 기록')
print('□ 거래 일지 작성')


print('\n' + '='*80)
print('🎯 최종 요약')
print('='*80)

print('\n핵심 원칙:')
print('  1. AI 확률 60% 이상만 진입')
print('  2. 익절 +20%, 손절 -5% 엄수')
print('  3. 최대 5일 보유')
print('  4. 100% 1회 매수 (물타기 X)')
print('  5. 감정 배제, 기계적 실행')
print('  6. 철저한 기록 및 분석')
print('')
print('예상 성과:')
print('  - 월 17회 거래 (AI 필터링)')
print('  - 승률 79.0%')
print('  - 월 수익률 234.1%')
print('  - 1,000만원 → 3,341만원 (매월)')
print('')
print('리스크:')
print('  - 일일 최대 손실: 5%')
print('  - 연속 손실 시 전략 재검토')
print('  - 시장 급변 시 거래 중단')

print('\n' + '='*80 + '\n')
