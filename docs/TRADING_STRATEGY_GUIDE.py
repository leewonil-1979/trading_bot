"""
매매 전략 상세 설명
- 4가지 패턴 중 어느 것으로 매수하는가?
- 매수/매도 시점
- 자금 관리
- 불타기/물타기
"""

print("\n" + "="*80)
print("📋 급락 후 반등 매매 전략 - 완전 가이드")
print("="*80 + "\n")

print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print("1️⃣ 4가지 패턴 - 매수 조건 아님! AI가 발견한 성공 패턴 분류")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print()

print("❗ 중요: 4가지 패턴은 '매수 순서'가 아닙니다!")
print("→ AI가 과거 352개 급락을 분석해서 발견한 '성공 패턴 분류'입니다.\n")

print("4가지 패턴 설명:")
print("-" * 80)
print()

print("패턴 1️⃣ 과매도 + 거래량 폭발")
print("   의미: RSI가 매우 낮고(과매도) + 거래량이 터진(3배 이상) 급락")
print("   예시: 악재 나왔지만 과도하게 팔려서 오히려 반등")
print("   승률: 100% (5/5)")
print()

print("패턴 2️⃣ 볼린저밴드 확장 + MACD 반전")
print("   의미: 변동성이 커지면서(볼린저밴드 폭 확대) 추세 전환(MACD)")
print("   예시: 급락 후 기술적 반등 신호 포착")
print("   승률: 89.4% (59/66)")
print()

print("패턴 3️⃣ 스토캐스틱 과매도")
print("   의미: 스토캐스틱이 20 이하로 극도로 낮음")
print("   예시: 단기 과매도 구간, 기술적 반등 예상")
print("   승률: 85.7% (42/49)")
print()

print("패턴 4️⃣ 적정 급락 (-10% ~ -15%)")
print("   의미: -20% 이상 폭락 아닌 '적정 수준' 급락")
print("   예시: 패닉이 아닌 조정 수준 급락")
print("   승률: 86.4% (76/88)")
print()

print("💡 핵심:")
print("   패턴 1, 2, 3, 4 중 하나만 만족해도 매수? ❌")
print("   → AI가 이 모든 지표를 종합해서 '반등 확률'을 계산합니다!")
print()

print("\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print("2️⃣ 실제 매수 조건 (단 하나!)")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print()

print("✅ 매수 조건 (단 1개):")
print("   AI 예측 반등 확률 ≥ 60%")
print()

print("🤖 AI가 하는 일:")
print("   1. 급락 종목 발견 (-10% 이상)")
print("   2. 24개 기술적 지표 계산")
print("      - crash_rate (급락률)")
print("      - close, volume, change_pct")
print("      - ma5, ma20, ma60 (이동평균)")
print("      - volume_ma20, volume_spike (거래량)")
print("      - rsi, macd, macd_signal, macd_diff")
print("      - bb_upper, bb_middle, bb_lower, bb_width")
print("      - stoch_k, stoch_d (스토캐스틱)")
print("      - atr (변동성)")
print("      - institution_net, foreign_net, individual_net, program_net")
print()
print("   3. 24개 지표를 AI 모델에 입력")
print("   4. 반등 확률 계산 (0% ~ 100%)")
print("   5. 확률 ≥ 60% → 매수 신호!")
print()

print("예시:")
print("-" * 80)
print("종목: 성문전자우")
print("급락률: -14.33%")
print()
print("AI 계산:")
print("   RSI: 19.0 (과매도) → 점수 +")
print("   거래량: 3.5배 (폭발) → 점수 ++")
print("   볼린저밴드 폭: 0.462 (확대) → 점수 +")
print("   MACD: -580.65 (하락 중) → 점수 -")
print("   스토캐스틱 K: 1.2 (과매도) → 점수 +")
print()
print("   → 종합 확률: 85.4% ✅ 매수!")
print("   → 결과: +16.73% 반등 성공")
print()

print("\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print("3️⃣ 매수/매도 시점 (타이밍)")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print()

print("📅 D-Day (급락 발생일)")
print("-" * 80)
print("시간: 15:30 (장 마감 후) ~ 23:59")
print()
print("작업:")
print("   1. 당일 -10% 이상 급락 종목 검색")
print("   2. 각 종목별 24개 지표 계산")
print("   3. AI로 반등 확률 예측")
print("   4. 확률 60% 이상 종목 → 매수 대기 리스트 등록")
print()
print("예시:")
print("   - 성문전자우: 확률 85.4% ✅ 내일 매수")
print("   - 유한양행우: 확률 45.2% ❌ 매수 안 함")
print("   - 동양우: 확률 72.1% ✅ 내일 매수")
print()

print("📅 D+1 (매수일)")
print("-" * 80)
print("시간: 09:00 (장 시작)")
print()
print("매수 전략:")
print("   ✅ 권장: 시초가 매수 (09:00)")
print("      이유: 반등의 첫 순간을 잡기 위해")
print("      방법: 시장가 주문")
print()
print("   ⚠️  대안: 09:00 ~ 09:30 사이 매수")
print("      이유: 시초가 갭 상승 시 조금 기다렸다가")
print("      방법: 지정가 주문 (전일 종가 기준)")
print()

print("매수 후 즉시:")
print("   1. 목표가 설정: 매수가 × 1.10 (+10%)")
print("   2. 손절가 설정: 매수가 × 0.98 (-2%)")
print()
print("예시:")
print("   매수가: 10,000원")
print("   목표가: 11,000원 (+10%)")
print("   손절가: 9,800원 (-2%)")
print()

print("📅 D+1 ~ D+5 (보유 기간)")
print("-" * 80)
print("시간: 09:00 ~ 15:30 (장 중)")
print()
print("모니터링:")
print("   매 1분마다 체크 (자동)")
print("   1. 현재가 ≥ 목표가(+10%) → 즉시 매도 (익절) ✅")
print("   2. 현재가 ≤ 손절가(-2%) → 즉시 매도 (손절) ❌")
print("   3. 5일째 15:20 도달 → 무조건 매도 (시간 손절)")
print()

print("매도 우선순위:")
print("   1순위: +10% 익절 (목표 달성)")
print("   2순위: -2% 손절 (손실 제한)")
print("   3순위: 5일 째 종가 매도 (시간 초과)")
print()

print("예시 시나리오:")
print("-" * 80)
print("D-Day: 성문전자우 -14.33% 급락, AI 확률 85.4%")
print("D+1 09:00: 10,000원 매수")
print("D+1 11:30: 10,500원 (+5%) → 홀딩")
print("D+2 10:15: 11,000원 (+10%) → 즉시 매도! ✅")
print("   보유 기간: 1.04일")
print("   수익: +1,000원 (+10%)")
print()

print("\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print("4️⃣ 자금 관리 (예수금 배분)")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print()

print("💰 기본 원칙:")
print("-" * 80)
print()

print("총 예수금: 10,000,000원 가정")
print()

print("1회 매수 금액: 1,000,000원 (총 예수금의 10%)")
print("   이유: 리스크 분산")
print("   → 1종목 실패해도 -2% 손절 = 총 자산의 -0.2% 손실")
print()

print("동시 보유 최대: 3종목")
print("   이유: 급락은 자주 발생하지 않음 (월 15회)")
print("   → 동시에 3종목 이상 급락 시 선택적 매수")
print()

print("예수금 배분:")
print("   - 매수 대기: 3,000,000원 (30%, 3종목)")
print("   - 여유 자금: 7,000,000원 (70%)")
print()

print("📊 시뮬레이션:")
print("-" * 80)
print()

print("상황 1: 1종목만 급락")
print("   예수금: 10,000,000원")
print("   매수: 성문전자우 1,000,000원")
print("   잔여: 9,000,000원")
print()

print("상황 2: 3종목 동시 급락 (AI 확률 60%+)")
print("   예수금: 10,000,000원")
print("   매수 1: 성문전자우 1,000,000원 (확률 85%)")
print("   매수 2: 동양우 1,000,000원 (확률 72%)")
print("   매수 3: 소프트센우 1,000,000원 (확률 68%)")
print("   잔여: 7,000,000원")
print()

print("상황 3: 5종목 급락했지만 3종목만 매수")
print("   예수금: 10,000,000원")
print("   매수 1: 종목A 1,000,000원 (확률 85%) ✅")
print("   매수 2: 종목B 1,000,000원 (확률 78%) ✅")
print("   매수 3: 종목C 1,000,000원 (확률 72%) ✅")
print("   대기 4: 종목D (확률 68%) ⏸️ 자리 날 때까지 대기")
print("   대기 5: 종목E (확률 62%) ⏸️ 자리 날 때까지 대기")
print("   → 매수 1, 2, 3 중 하나라도 익절/손절되면 → 종목D 매수")
print()

print("\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print("5️⃣ 불타기/물타기 - 하지 않습니다! ❌")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print()

print("❌ 불타기 (추가 상승 시 추가 매수) - 안 함!")
print("-" * 80)
print("이유:")
print("   1. 목표가 +10% 도달 시 → 즉시 익절")
print("   2. 추가 상승 기대하지 않음")
print("   3. 이 전략은 '단기 반등' 전략 (5일 이내)")
print()
print("예시:")
print("   매수가: 10,000원")
print("   현재가: 11,000원 (+10%)")
print("   → 불타기 ❌ / 즉시 매도 ✅")
print()

print("❌ 물타기 (추가 하락 시 추가 매수) - 절대 안 함!")
print("-" * 80)
print("이유:")
print("   1. -2% 손절가 도달 시 → 즉시 손절")
print("   2. AI 예측이 틀렸을 가능성 → 추가 손실 방지")
print("   3. 물타기는 추가 손실 확대 위험")
print()
print("예시:")
print("   매수가: 10,000원")
print("   현재가: 9,800원 (-2%)")
print("   → 물타기 ❌ / 즉시 손절 ✅")
print()

print("💡 왜 불타기/물타기를 안 하나?")
print("-" * 80)
print()
print("이 전략의 핵심:")
print("   1. AI가 60% 이상 확률로 '5일 내 +10% 반등' 예측")
print("   2. 맞으면 +10% 익절, 틀리면 -2% 손절")
print("   3. 승률 79%로 장기적 수익")
print()
print("불타기/물타기 하면:")
print("   1. 전략 복잡해짐")
print("   2. 리스크 관리 어려움")
print("   3. AI 예측 정확도 무의미")
print()

print("✅ 대신 이렇게:")
print("-" * 80)
print("   1. 한 종목당 1회만 매수 (1,000,000원)")
print("   2. +10% 익절 or -2% 손절")
print("   3. 매도 후 → 다음 급락 종목 찾기")
print()

print("\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print("6️⃣ 월간 시뮬레이션 (실전 예상)")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print()

print("초기 예수금: 10,000,000원")
print("-" * 80)
print()

print("주차별 시뮬레이션:")
print()

# 1주차
print("1주차:")
print("   급락 발생: 4회")
print("   AI 매수: 1회 (확률 75%)")
print("   매수: 종목A 1,000,000원")
print("   결과: +10% 익절 (+100,000원)")
print("   예수금: 10,100,000원")
print()

# 2주차
print("2주차:")
print("   급락 발생: 3회")
print("   AI 매수: 1회 (확률 68%)")
print("   매수: 종목B 1,010,000원")
print("   결과: -2% 손절 (-20,200원)")
print("   예수금: 10,079,800원")
print()

# 3주차
print("3주차:")
print("   급락 발생: 5회")
print("   AI 매수: 2회")
print("   매수 1: 종목C 1,000,000원 (확률 82%)")
print("   매수 2: 종목D 1,000,000원 (확률 71%)")
print("   결과: 둘 다 +10% 익절 (+200,000원)")
print("   예수금: 10,279,800원")
print()

# 4주차
print("4주차:")
print("   급락 발생: 3회")
print("   AI 매수: 1회 (확률 65%)")
print("   매수: 종목E 1,027,980원")
print("   결과: +10% 익절 (+102,798원)")
print("   예수금: 10,382,598원")
print()

print("=" * 80)
print("월말 결과:")
print("   초기: 10,000,000원")
print("   최종: 10,382,598원")
print("   수익: +382,598원 (+3.8%)")
print()
print("   거래: 5회")
print("   성공: 4회 (80% 승률)")
print("   실패: 1회")
print("=" * 80)
print()

print("💡 연간 예상:")
print("   월 +3.8% × 12개월 = 연 +45.6% (복리)")
print("   10,000,000원 → 14,560,000원")
print()

print("\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print("7️⃣ 핵심 정리")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")
print()

print("✅ 매수 조건:")
print("   AI 반등 확률 ≥ 60% (4가지 패턴 종합 판단)")
print()

print("✅ 매수 시점:")
print("   급락 다음날 09:00 시초가")
print()

print("✅ 매도 시점:")
print("   1순위: +10% 익절")
print("   2순위: -2% 손절")
print("   3순위: 5일 째 종가 매도")
print()

print("✅ 자금 관리:")
print("   1회 매수: 총 예수금의 10%")
print("   동시 보유: 최대 3종목")
print()

print("✅ 불타기/물타기:")
print("   둘 다 하지 않음!")
print("   → 1종목 1회 매수, 익절/손절 후 다음 종목")
print()

print("✅ 예상 수익:")
print("   월 +3~5%")
print("   연 +45~60% (복리)")
print()

print("="*80)
print("✅ 설명 완료!")
print("="*80 + "\n")
