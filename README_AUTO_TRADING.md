# ğŸ¤– AI ê¸‰ë½ ë°˜ë“± ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ

## âœ¨ í•µì‹¬ ê¸°ëŠ¥

### 1. **ì¢…ëª©ë³„ ë§ì¶¤ ì „ëµ** (AI ìµœì í™”)
```python
# ê¸°ì¡´ ë°©ì‹ (ê³ ì •ê°’)
ëª¨ë“  ì¢…ëª©: ìµì ˆ +8%, ì†ì ˆ -5%

# AI ìµœì í™” ë°©ì‹ 
íš¨ì„±(004800): ìµì ˆ +16.6% â† ê³¼ê±° 10ë²ˆ ê¸‰ë½ ë¶„ì„
ì§„ì–‘ì‚°ì—…(003780): ìµì ˆ +13.2% â† ë³€ë™ì„± íŒ¨í„´ í•™ìŠµ
```

### 2. **ì‹¤ì‹œê°„ í•™ìŠµ ì—…ë°ì´íŠ¸**
- ì¥ì¤‘ ê¸‰ë½ ê°ì§€ â†’ ì¦‰ì‹œ ë°ì´í„° ì €ì¥
- ë§¤ì¼ 15:40 í•™ìŠµ ë°ì´í„° ë³‘í•©
- ì£¼ë§ ëª¨ë¸ ì¬í•™ìŠµ â†’ **ì„±ëŠ¥ ì§€ì† ê°œì„ **

### 3. **ì™„ì „ ìë™í™”**
- ê°ì§€ â†’ ë¶„ì„ â†’ ë§¤ë§¤ â†’ í•™ìŠµ (ë¬´í•œ ë£¨í”„)
- ì‚¬ìš©ì ê°œì… ì—†ìŒ

---

## ğŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
/home/user1/auto_trading/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ crash_rebound/
â”‚   â”‚   â””â”€â”€ all_stocks_3years.parquet  â† ë©”ì¸ í•™ìŠµ ë°ì´í„° (219MB, 1.37Mí–‰)
â”‚   â””â”€â”€ realtime_crashes/              â† ì‹¤ì‹œê°„ ìˆ˜ì§‘ ë°ì´í„° (12/1ë¶€í„° ì €ì¥)
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ crash_rebound_model.txt        â† LightGBM ëª¨ë¸ (87.9% ìŠ¹ë¥ )
â”‚   â””â”€â”€ feature_importance.csv
â”‚
â”œâ”€â”€ auto_trading/
â”‚   â”œâ”€â”€ realtime_learning_updater.py   â† ì‹¤ì‹œê°„ í•™ìŠµ ì—…ë°ì´íŠ¸
â”‚   â””â”€â”€ auto_trading_scheduler.py      â† ìŠ¤ì¼€ì¤„ëŸ¬ (ìë™ ì‹¤í–‰)
â”‚
â”œâ”€â”€ test_realtime_system.py            â† í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ docs/
    â””â”€â”€ LEARNING_DATA_GUIDE.md         â† ìƒì„¸ ê°€ì´ë“œ
```

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1ï¸âƒ£ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸

```bash
cd /home/user1/auto_trading

# ì „ì²´ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
/home/user1/auto_trading/.venv/bin/python test_realtime_system.py
```

**í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì˜ˆì‹œ:**
```
âœ… ì„±ê³µ - ë°ì´í„° ë³‘í•©
âœ… ì„±ê³µ - ì „ì²´ ì›Œí¬í”Œë¡œìš°

[íš¨ì„±] ìµœì í™” ê²°ê³¼:
  ëª©í‘œ ìµì ˆ: +16.6% (ê¸°ë³¸ +8% ëŒ€ë¹„ +8.6% ìƒìŠ¹!)
  ì†ì ˆ: -5.0%
  ì¶”ê°€ ë§¤ìˆ˜: -5.0%
```

### 2ï¸âƒ£ ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰ (12/1 ì›”ìš”ì¼ë¶€í„°)

```bash
# ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
nohup /home/user1/auto_trading/.venv/bin/python \
  auto_trading/auto_trading_scheduler.py > logs/scheduler.log 2>&1 &
```

**ìë™ ì‹¤í–‰ ì¼ì •:**
- **09:00~15:30**: ì‹¤ì‹œê°„ ê¸‰ë½ ìŠ¤ìº” (1ë¶„ë§ˆë‹¤)
- **15:40**: ì˜¤ëŠ˜ ë°ì´í„° ë³‘í•©
- **í† ìš”ì¼ 01:00**: AI ëª¨ë¸ ì¬í•™ìŠµ

---

## ğŸ“Š ì‹¤ì‹œê°„ í•™ìŠµ í”Œë¡œìš°

```
ì›”ìš”ì¼ 09:30 
ì‚¼ì„±ì „ì -12.3% ê¸‰ë½ ê°ì§€
    â†“
ê³¼ê±° ì´ë ¥ ì¡°íšŒ: 10ê±´
í‰ê·  ìµœê³  ìˆ˜ìµë¥ : +14.2%
í‰ê·  ìµœì €ì : -2.8%
    â†“
ìµœì í™” ê²°ê³¼:
  ìµì ˆ: +14.2%
  ì†ì ˆ: -5.0%
  ì¶”ê°€ë§¤ìˆ˜: -2.8%
    â†“
ë§¤ë§¤ ì‹ í˜¸ ìƒì„±
    â†“
15:40 ë°ì´í„° ë³‘í•©
    â†“
í† ìš”ì¼ 01:00 ì¬í•™ìŠµ
    â†“
ë‹¤ìŒì£¼: ë” ì •í™•í•œ ì˜ˆì¸¡!
```

---

## ğŸ’¡ í•µì‹¬ ìµœì í™” ì•Œê³ ë¦¬ì¦˜

### ëª©í‘œ ìµì ˆë¥  ê³„ì‚°
```python
# 1. ê³¼ê±° ê¸‰ë½ ì´ë ¥ ì¡°íšŒ (ê°™ì€ ì¢…ëª©)
crash_history = get_crash_history(stock_code)

# 2. ê° ê¸‰ë½ í›„ ìµœëŒ€ ìˆ˜ìµë¥  ê³„ì‚°
max_returns = []
for crash in crash_history:
    max_return = calculate_max_return_after_crash(crash)
    max_returns.append(max_return)

# 3. 75 percentile (ìƒìœ„ 25% ìˆ˜ìµë¥ )
target_profit = np.percentile(max_returns, 75)
target_profit = max(5%, min(target_profit, 20%))  # 5~20% ë²”ìœ„
```

### ì¶”ê°€ ë§¤ìˆ˜ ì‹œì  ê³„ì‚°
```python
# ê° ê¸‰ë½ í›„ ìµœì €ì  ë¶„ì„
lowest_points = []
for crash in crash_history:
    lowest = find_lowest_point_after_crash(crash)
    drop_rate = (lowest - crash_price) / crash_price * 100
    lowest_points.append(drop_rate)

# í‰ê·  ìµœì €ì 
additional_buy = np.mean(lowest_points)  # -2% ~ -5%
```

---

## ğŸ“ˆ ì„±ëŠ¥ ì§€í‘œ

### ê¸°ì¡´ í•™ìŠµ ë°ì´í„°
```
ê¸°ê°„: 2023-02-22 ~ 2025-11-19 (ì•½ 3ë…„)
ì¢…ëª©: 2,193ê°œ
ë°ì´í„°: 1,374,025í–‰
ê¸‰ë½ ì´ë²¤íŠ¸: 11,813ê°œ
ë°˜ë“± ì„±ê³µë¥ : 59.2%
```

### AI ëª¨ë¸ ì„±ëŠ¥
```
ì•Œê³ ë¦¬ì¦˜: LightGBM
ì •í™•ë„: 67%
AUC: 0.729
ë°±í…ŒìŠ¤íŠ¸ ìŠ¹ë¥ : 87.9% (í™•ë¥  60%+ í•„í„°)
í‰ê·  ìˆ˜ìµ: +8.30%
```

### ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ íš¨ê³¼
```
Day 1 (12/1): ê¸°ì¡´ ëª¨ë¸ (87.9% ìŠ¹ë¥ )
Day 30: +5ê°œ ì‹¤ì „ ë°ì´í„° ì¶”ê°€
Day 90: +15ê°œ ì‹¤ì „ ë°ì´í„° ì¶”ê°€
  â†’ ì˜ˆìƒ: ìŠ¹ë¥  88~90% ìƒìŠ¹
```

---

## ğŸ”§ ì„¤ì • íŒŒì¼

### ìŠ¤ì¼€ì¤„ ë³€ê²½
`auto_trading/auto_trading_scheduler.py`:
```python
# ìŠ¤ìº” ì£¼ê¸° ë³€ê²½ (ê¸°ë³¸: 1ë¶„)
schedule.every(1).minutes.do(self.scan_realtime_crashes)

# ë°ì´í„° ë³‘í•© ì‹œê°„ ë³€ê²½ (ê¸°ë³¸: 15:40)
schedule.every().day.at("15:40").do(self.daily_data_merge)

# ì¬í•™ìŠµ ìš”ì¼ ë³€ê²½ (ê¸°ë³¸: í† ìš”ì¼)
schedule.every().saturday.at("01:00").do(self.weekly_model_retrain)
```

### ê¸‰ë½ ê¸°ì¤€ ë³€ê²½
`auto_trading/realtime_learning_updater.py`:
```python
# ê¸°ë³¸: -10%
self.crash_threshold = -10.0

# ë” ë³´ìˆ˜ì : -15%
self.crash_threshold = -15.0
```

---

## ğŸ“ ë¡œê·¸ í™•ì¸

```bash
# ìŠ¤ì¼€ì¤„ëŸ¬ ë¡œê·¸
tail -f logs/scheduler.log

# ì˜¤ëŠ˜ ê¸‰ë½ ì¢…ëª© í™•ì¸
ls data/realtime_crashes/crash_$(date +%Y%m%d).parquet

# ë°ì´í„° í¬ê¸° í™•ì¸
du -sh data/crash_rebound/all_stocks_3years.parquet
```

---

## ğŸ¯ ì˜ˆìƒ ì‹œë‚˜ë¦¬ì˜¤ (12/1 ~ 12/31)

### Day 1 (12/1 ì›”ìš”ì¼)
```
09:30 ê¸‰ë½ ê°ì§€: Aì¢…ëª© -11.2%
â†’ AI ì˜ˆì¸¡: 72% í™•ë¥ 
â†’ ìµœì í™”: ìµì ˆ +13.5%, ì†ì ˆ -5%
â†’ ë§¤ìˆ˜ ì‹ í˜¸ ìƒì„±
15:40 ë°ì´í„° ë³‘í•© (+1ê±´)
```

### Week 1 (12/1 ~ 12/7)
```
ì´ ê¸‰ë½ ê°ì§€: 5ê±´
ë§¤ë§¤: 3ê±´ (60%+ í™•ë¥ ë§Œ)
ìŠ¹ë¥ : 2ìŠ¹ 1íŒ¨ (66.7%)
í•™ìŠµ ë°ì´í„°: +5ê±´
```

### Month 1 (12/1 ~ 12/31)
```
ì´ ê¸‰ë½ ê°ì§€: 20ê±´
ë§¤ë§¤: 12ê±´
ìŠ¹ë¥ : 10ìŠ¹ 2íŒ¨ (83.3%)
í•™ìŠµ ë°ì´í„°: +20ê±´
ì¬í•™ìŠµ: 4íšŒ (ë§¤ì£¼ í† ìš”ì¼)
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ë°±ì—…**: ë°ì´í„° ë³‘í•© ì‹œ ìë™ ë°±ì—…ë˜ë‚˜, ì£¼ê°„ ìˆ˜ë™ ë°±ì—… ê¶Œì¥
2. **ë””ìŠ¤í¬ ê³µê°„**: ì‹¤ì‹œê°„ ë°ì´í„°ëŠ” ë§¤ì›” ì•½ 50MB ì¦ê°€ ì˜ˆìƒ
3. **API ì œí•œ**: pykrx/FinanceDataReaderëŠ” ì œí•œ ì—†ìœ¼ë‚˜, ê³¼ë„í•œ í˜¸ì¶œ ì£¼ì˜
4. **ëª¨ë‹ˆí„°ë§**: ì£¼ê°„ ë‹¨ìœ„ë¡œ ìŠ¹ë¥ /ìˆ˜ìµë¥  í™•ì¸ ê¶Œì¥

---

## ğŸ› ë¬¸ì œ í•´ê²°

### Q1. ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ë©ˆì·„ì–´ìš”
```bash
# í”„ë¡œì„¸ìŠ¤ í™•ì¸
ps aux | grep auto_trading_scheduler

# ì¬ì‹œì‘
pkill -f auto_trading_scheduler
nohup python auto_trading/auto_trading_scheduler.py > logs/scheduler.log 2>&1 &
```

### Q2. ë°ì´í„° ë³‘í•©ì´ ì•ˆ ë¼ìš”
```python
# ìˆ˜ë™ ë³‘í•©
python auto_trading/realtime_learning_updater.py
```

### Q3. ìµœì í™” ê²°ê³¼ê°€ ì´ìƒí•´ìš”
```python
# ê³¼ê±° ì´ë ¥ í™•ì¸
import pandas as pd
df = pd.read_parquet('data/crash_rebound/all_stocks_3years.parquet')
df_stock = df[df['stock_code'] == '005930']
print(len(df_stock[df_stock['crash_rate'] <= -10]))  # ê¸‰ë½ íšŸìˆ˜
```

---

## ğŸ“š ì¶”ê°€ ë¬¸ì„œ

- [í•™ìŠµ ë°ì´í„° ê°€ì´ë“œ](docs/LEARNING_DATA_GUIDE.md)
- [AI ëª¨ë¸ ì„¤ëª…](ai_model/README.md)
- [ì „ëµ ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼](analysis/README.md)

---

## ğŸ‰ ë‹¤ìŒ ë‹¨ê³„

- [ ] 12/1 ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œì‘
- [ ] ì²« ì£¼ ì‹¤ì „ ë°ì´í„° ìˆ˜ì§‘
- [ ] 12/7 ì²« ëª¨ë¸ ì¬í•™ìŠµ
- [ ] 1ê°œì›” í›„ ì„±ëŠ¥ ë¶„ì„

**ì¤€ë¹„ ì™„ë£Œ! 12/1 ì›”ìš”ì¼ë¶€í„° ì‹œì‘í•˜ì„¸ìš”! ğŸš€**
