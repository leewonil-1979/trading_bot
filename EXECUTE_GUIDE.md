# ğŸš€ VI í•™ìŠµ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ê°€ì´ë“œ

## âœ… í˜„ì¬ ìƒíƒœ

### ì™„ë£Œëœ ì‚¬í•­
- âœ… Stage 1: ì¢…ëª© ë¦¬ìŠ¤íŠ¸ ìˆ˜ì§‘ ì™„ë£Œ (4,203ê°œ)
- âœ… Stage 2 êµ¬ì¡° ê°œì„ : 2ë‹¨ê³„ ìƒ˜í”Œë§ ì ìš©
- âœ… FinanceDataReader í†µí•©: ì•ˆì •ì ì¸ ë°ì´í„° ì†ŒìŠ¤
- âœ… ì†Œê·œëª¨ í…ŒìŠ¤íŠ¸ ì„±ê³µ:
  - 100ê°œ ì¢…ëª© ìŠ¤ìº” â†’ 81ê°œ VI ì¢…ëª© ë°œê²¬ (81% ë°œê²¬ìœ¨)
  - 10ê°œ ì¢…ëª© ë”¥ ìˆ˜ì§‘ â†’ 100% ì„±ê³µ (2ë…„ì¹˜ ë°ì´í„°)

### ë°ì´í„° í˜„í™©
```
data/raw/
  â”œâ”€â”€ stock_list.json          # 4,203ê°œ ì „ì²´ ì¢…ëª©
  â”œâ”€â”€ vi_stocks.json           # 81ê°œ VI ì¢…ëª© (100ê°œ í…ŒìŠ¤íŠ¸ ê²°ê³¼)
  â”œâ”€â”€ 329180_1min.csv          # HDí˜„ëŒ€ì¤‘ê³µì—… (486ì¼)
  â”œâ”€â”€ 402340_1min.csv          # SKìŠ¤í€˜ì–´ (486ì¼)
  â””â”€â”€ ... (8ê°œ ë”)
```

## ğŸ¯ ì‹¤ì „ ì‹¤í–‰ ë°©ë²•

### 1ï¸âƒ£ ì „ì²´ íŒŒì´í”„ë¼ì¸ (ìë™)
```bash
cd /home/user1/auto_trading
source learning/trading_bot/bin/activate
python pipeline.py --stage 0
```

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 8~12ì‹œê°„
- Stage 1: 5ë¶„ (ì´ë¯¸ ì™„ë£Œ)
- Stage 2-A: 3~4ì‹œê°„ (4,203ê°œ ì¢…ëª© ìŠ¤ìº”)
- Stage 2-B: 3~4ì‹œê°„ (300~500ê°œ VI ì¢…ëª© ë”¥ ìˆ˜ì§‘)
- Stage 3-5: 1~2ì‹œê°„

### 2ï¸âƒ£ ë‹¨ê³„ë³„ ì‹¤í–‰ (ê¶Œì¥)

#### Stage 1: ì¢…ëª© ë¦¬ìŠ¤íŠ¸ âœ… ì™„ë£Œ
```bash
python pipeline.py --stage 1
```

#### Stage 2-A: VI ìŠ¤ìº” (4,203ê°œ â†’ 300~500ê°œ)
```bash
python pipeline.py --stage 2 --scan-days 30 --days 730
```
- **ì†Œìš” ì‹œê°„**: 3~4ì‹œê°„
- **ê²°ê³¼**: `vi_stocks.json` (ì˜ˆìƒ 300~500ê°œ ì¢…ëª©)

#### Stage 2-B: ë”¥ ìˆ˜ì§‘ (ìë™ ì‹¤í–‰ë¨)
- VI ì¢…ëª©ë§Œ 2ë…„ì¹˜ ìˆ˜ì§‘
- **ì†Œìš” ì‹œê°„**: 2~3ì‹œê°„
- **ê²°ê³¼**: ê° ì¢…ëª©ë³„ CSV íŒŒì¼ (~486ì¼ ë°ì´í„°)

#### Stage 3: ë°ì´í„° ì „ì²˜ë¦¬
```bash
python pipeline.py --stage 3
```
- **ì†Œìš” ì‹œê°„**: 10~20ë¶„
- **ê²°ê³¼**: `data/processed/*.csv`

#### Stage 4: VI íƒì§€ ë° íŒ¨í„´ ë¶„ì„
```bash
python pipeline.py --stage 4
```
- **ì†Œìš” ì‹œê°„**: 20~30ë¶„
- **ê²°ê³¼**: `data/patterns/*_vi_events.json`, `*_pattern_analysis.json`

#### Stage 5: ì „ëµ ìƒì„±
```bash
python pipeline.py --stage 5
```
- **ì†Œìš” ì‹œê°„**: 1~2ë¶„
- **ê²°ê³¼**: `config/strategy.json` (AWS ë°°í¬ìš©)

## ğŸ“Š ì˜ˆìƒ ê²°ê³¼

### VI ë°œê²¬ìœ¨
- í…ŒìŠ¤íŠ¸ ê²°ê³¼: 81% (100ê°œ ì¤‘ 81ê°œ)
- ì „ì²´ ì˜ˆìƒ: 7~10% (4,203ê°œ ì¤‘ 300~420ê°œ)
  - ì´ìœ : ëŒ€í˜•ì£¼ ìœ„ì£¼ í…ŒìŠ¤íŠ¸ â†’ ë³€ë™ì„± ë†’ìŒ
  - ì „ì²´ëŠ” ì¤‘ì†Œí˜•ì£¼ í¬í•¨ â†’ ë°œê²¬ìœ¨ ë‚®ì•„ì§

### ë°ì´í„° í¬ê¸°
```
Stage 2-A ìŠ¤ìº”: ~1GB (4,203ê°œ Ã— 30ì¼)
Stage 2-B ë”¥ìˆ˜ì§‘: ~10GB (300ê°œ Ã— 2ë…„)
ì „ì²´: ~11GB (vs. ê¸°ì¡´ 500GB)
```

### ì‹œê°„ ì ˆì•½
```
ê¸°ì¡´ ë°©ì‹: 150~200ì‹œê°„
ìƒˆ ë°©ì‹: 8~12ì‹œê°„
ì ˆê°: 93~95%
```

## ğŸ”§ ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ (nohup)

ì¥ì‹œê°„ ì‹¤í–‰ì´ë¯€ë¡œ **ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ ê¶Œì¥**:

```bash
cd /home/user1/auto_trading
source learning/trading_bot/bin/activate

# Stage 2 ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
nohup python pipeline.py --stage 2 --scan-days 30 --days 730 > logs/stage2.log 2>&1 &

# ì§„í–‰ìƒí™© ëª¨ë‹ˆí„°ë§
tail -f logs/stage2.log

# í”„ë¡œì„¸ìŠ¤ í™•ì¸
ps aux | grep pipeline
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. FinanceDataReader í•œê³„
- **ì¼ë´‰ ë°ì´í„°ë§Œ ì œê³µ** (ë¶„ë´‰ âŒ)
- ì‹¤ì œ VI íŒ¨í„´ í•™ìŠµì—ëŠ” **ë¶„ë´‰ í•„ìš”**
- í˜„ì¬ëŠ” êµ¬ì¡° ê²€ì¦ìš©

### 2. ì‹¤ì „ ë¶„ë´‰ ë°ì´í„° ìˆ˜ì§‘ ë°©ë²•
**A. ë„¤ì´ë²„ API (ë¬´ë£Œ, ë¶ˆì•ˆì •)**
```python
# ì¥ ì‹œê°„(09:00~15:30)ì—ë§Œ ì‘ë™
fetch_minute_data.py ì‚¬ìš©
```

**B. í•œêµ­íˆ¬ìì¦ê¶Œ KIS API (ë¬´ë£Œ, ì•ˆì •)**
```bash
pip install mojito
# API í‚¤ ë°œê¸‰ í•„ìš”: https://apiportal.koreainvestment.com
```

**C. ìœ ë£Œ ë°ì´í„° (ì•ˆì •, ë¹„ìš©)**
- QuantDataManager
- WiseReport API

### 3. ë©”ëª¨ë¦¬ ê´€ë¦¬
```python
# ëŒ€ìš©ëŸ‰ ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ ë¶€ì¡± ê°€ëŠ¥
# ì²­í¬ ë‹¨ìœ„ ì²˜ë¦¬ í•„ìš”
df = pd.read_csv(file, chunksize=10000)
```

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥
```bash
# 1. ì „ì²´ VI ìŠ¤ìº” (3~4ì‹œê°„)
source learning/trading_bot/bin/activate
nohup python pipeline.py --stage 2 > logs/stage2_full.log 2>&1 &

# 2. ë¡œê·¸ ëª¨ë‹ˆí„°ë§
tail -f logs/stage2_full.log
```

### ë¶„ë´‰ ë°ì´í„° í™•ë³´ í›„
```bash
# 3. ì „ì²˜ë¦¬ë¶€í„° ì „ëµ ìƒì„±ê¹Œì§€
python pipeline.py --stage 3
python pipeline.py --stage 4
python pipeline.py --stage 5
```

### AWS ë°°í¬
```bash
# config/strategy.json í™•ì¸ í›„
# AWS Lambda/EC2ì— ë°°í¬
# (ë³„ë„ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ í•„ìš”)
```

## ğŸ“ í•™ìŠµ ëª©í‘œ ì¬í™•ì¸

1. **íŒ¨í„´ 1**: ê°­í•˜ë½ VI â†’ ë°˜ë“±
   - 09:00 -7~-10% í•˜ë½ â†’ VI â†’ ë°˜ë“± ë§¤ìˆ˜
   
2. **íŒ¨í„´ 2**: ìƒìŠ¹ VI â†’ ëˆŒë¦¼ â†’ ëŒíŒŒ
   - ê¸‰ë“± 5~10% â†’ VI â†’ ëˆŒë¦¼ â†’ ì „ê³ ì  ëŒíŒŒ ë§¤ìˆ˜

**ëª©í‘œ**: ë°±í…ŒìŠ¤íŠ¸ ìŠ¹ë¥  65% ì´ìƒ, í‰ê·  ìˆ˜ìµë¥  2% ì´ìƒ

---

**í˜„ì¬ ê¶Œì¥ ì‹¤í–‰**:
```bash
cd /home/user1/auto_trading
source learning/trading_bot/bin/activate
nohup python pipeline.py --stage 2 --scan-days 30 --days 730 > logs/stage2_ì‹¤í–‰$(date +%Y%m%d_%H%M).log 2>&1 &
echo "Stage 2 ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ ì‹œì‘!"
tail -f logs/stage2_ì‹¤í–‰*.log
```
